# ðŸŽ¯ AIåŠ©æ‰‹æç¤ºè¯æ¨¡æ¿ç³»ç»Ÿå®žçŽ°æ€»ç»“

## ðŸŽŠ æˆåŠŸå®žçŽ°å®Œæ•´çš„æç¤ºè¯ç®¡ç†ä½“ç³»

åŸºäºŽå…ƒçŸ³ç§‘æŠ€å°ç™½æ™ºèƒ½åŠ©æ‰‹çš„å…ˆè¿›æç¤ºè¯æž¶æž„ï¼Œæˆ‘ä»¬ä¸ºAIåŠ©æ‰‹é¡¹ç›®å®žçŽ°äº†ä¸€å¥—å®Œæ•´çš„**æç¤ºè¯æ¨¡æ¿ç®¡ç†ç³»ç»Ÿ**ï¼

## ðŸ—ï¸ ç³»ç»Ÿæž¶æž„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶

#### 1. **PromptTemplatesé…ç½®ç±»** ðŸ“‹
```java
@Component
@ConfigurationProperties(prefix = "ai.prompt-templates")
public class PromptTemplates {
    // åŠ¨æ€æ¨¡æ¿æ¸²æŸ“
    // æ™ºèƒ½ç¼“å­˜ç®¡ç†
    // å¤šç­–ç•¥æ¨¡æ¿é€‰æ‹©
}
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- ðŸ”„ **åŠ¨æ€æ¨¡æ¿æ¸²æŸ“**ï¼šæ”¯æŒæ—¶é—´ã€ä½ç½®ç­‰å˜é‡æ³¨å…¥
- ðŸŽ¯ **ç­–ç•¥æ¨¡æ¿é€‰æ‹©**ï¼šæ ¹æ®æ€è€ƒç­–ç•¥å’Œç”Ÿæˆç­–ç•¥è‡ªåŠ¨é€‰æ‹©
- ðŸ•’ **å®žæ—¶å˜é‡æ›¿æ¢**ï¼šå½“å‰æ—¶é—´ã€ä¸­æ–‡æ—¶æ®µã€æ˜ŸæœŸç­‰
- ðŸŒ **åœ°ç†ä¿¡æ¯é›†æˆ**ï¼šé¢„ç•™åœ°ç†ä½ç½®ä¿¡æ¯æŽ¥å£

#### 2. **åˆ†å±‚æç¤ºè¯ä½“ç³»** ðŸŽ­

##### åŸºç¡€å±‚æç¤ºè¯
- **åŸºç¡€Chatç³»ç»Ÿæç¤ºè¯**ï¼šæ—¥å¸¸å¯¹è¯çš„åŸºç¡€æ¨¡æ¿
- **æ·±åº¦æ€è€ƒç³»ç»Ÿæç¤ºè¯**ï¼šå¤šå±‚æ¬¡åˆ†æžæŽ¨ç†çš„ä¸“ä¸šæ¨¡æ¿

##### ä¸“ä¸šå±‚æç¤ºè¯
- **æŠ€æœ¯åˆ†æžæç¤ºè¯**ï¼šä¸“ä¸šæŠ€æœ¯æŽ¢è®¨
- **åˆ›æ„å†™ä½œæç¤ºè¯**ï¼šåˆ›æ–°æ€ç»´æ¿€å‘
- **é—®é¢˜è§£å†³æç¤ºè¯**ï¼šç³»ç»Ÿæ€§è§£å†³æ–¹æ¡ˆ
- **äº‹å®žæŸ¥è¯¢æç¤ºè¯**ï¼šæƒå¨ä¿¡æ¯æä¾›
- **å¯¹è¯å¼æç¤ºè¯**ï¼šå‹å¥½äº’åŠ¨ä½“éªŒ

##### ç­–ç•¥å±‚æç¤ºè¯
- **æˆ˜ç•¥æ€è€ƒæç¤ºè¯**ï¼šå®è§‚è§†è§’åˆ†æž
- **æ­¥éª¤åˆ†æžæç¤ºè¯**ï¼šç»“æž„åŒ–é—®é¢˜åˆ†è§£
- **æ‰¹åˆ¤æ€ç»´æç¤ºè¯**ï¼šå¤šè§’åº¦å®¢è§‚è¯„ä¼°

##### ç”Ÿæˆå±‚æç¤ºè¯
- **æ–‡ç« å†™ä½œæç¤ºè¯**ï¼šç»“æž„åŒ–å†…å®¹ç”Ÿæˆ
- **æ‘˜è¦ç”Ÿæˆæç¤ºè¯**ï¼šæ ¸å¿ƒè¦ç‚¹æå–
- **è¯¦ç»†è§£é‡Šæç¤ºè¯**ï¼šæ¦‚å¿µæ·±åº¦é˜è¿°

##### äº¤äº’å±‚æç¤ºè¯
- **è¿½é—®å»ºè®®æç¤ºè¯**ï¼šæ·±åº¦å¯¹è¯å¼•å¯¼
- **æ¾„æ¸…ç¡®è®¤æç¤ºè¯**ï¼šå‡†ç¡®ç†è§£ç¡®ä¿
- **åé¦ˆè¯„ä¼°æç¤ºè¯**ï¼šå»ºè®¾æ€§æ„è§æä¾›

## ðŸ”§ æŠ€æœ¯å®žçŽ°äº®ç‚¹

### 1. **æ™ºèƒ½æ¨¡æ¿é€‰æ‹©æœºåˆ¶** ðŸŽ¯
```java
// æ€è€ƒç­–ç•¥è‡ªåŠ¨åŒ¹é…
public String getThinkingStrategyPrompt(String strategy) {
    switch (strategy.toLowerCase()) {
        case "factual_analysis": return renderTemplate(getFactualQueryPrompt());
        case "creative_thinking": return renderTemplate(getCreativeWritingPrompt());
        case "problem_solving": return renderTemplate(getProblemSolvingPrompt());
        // ... æ›´å¤šç­–ç•¥
    }
}

// ç”Ÿæˆç­–ç•¥è‡ªåŠ¨åŒ¹é…
public String getGenerationStrategyPrompt(String strategy) {
    switch (strategy.toLowerCase()) {
        case "rag_generation": return renderTemplate(getArticleWritingPrompt());
        case "thinking_based_generation": return renderTemplate(getStepByStepAnalysisPrompt());
        // ... æ›´å¤šç­–ç•¥
    }
}
```

### 2. **åŠ¨æ€å˜é‡æ¸²æŸ“ç³»ç»Ÿ** ðŸ”„
```java
private String renderTemplate(String template) {
    // æ—¶é—´å˜é‡
    variables.put("{{datetime.year}}", String.valueOf(now.getYear()));
    variables.put("{{datetime.month}}", String.valueOf(now.getMonthValue()));
    variables.put("{{datetime.dayparts_zh}}", getChineseDayPart(now.getHour()));
    variables.put("{{datetime.weekday_zh}}", getChineseWeekday(now.getDayOfWeek()));
    
    // åœ°ç†ä½ç½®å˜é‡
    variables.put("{{geo_info_location}}", "æœªçŸ¥ä½ç½®");
    
    // æ™ºèƒ½æ›¿æ¢æ‰€æœ‰å˜é‡
    return replaceAllVariables(template, variables);
}
```

### 3. **ä¸­æ–‡æœ¬åœŸåŒ–æ”¯æŒ** ðŸ‡¨ðŸ‡³
```java
// ä¸­æ–‡æ—¶æ®µæ™ºèƒ½è¯†åˆ«
private String getChineseDayPart(int hour) {
    if (hour >= 5 && hour < 8) return "æ¸…æ™¨";
    if (hour >= 8 && hour < 11) return "ä¸Šåˆ";
    if (hour >= 11 && hour < 13) return "ä¸­åˆ";
    if (hour >= 13 && hour < 17) return "ä¸‹åˆ";
    if (hour >= 17 && hour < 19) return "å‚æ™š";
    if (hour >= 19 && hour < 22) return "æ™šä¸Š";
    return "æ·±å¤œ";
}

// ä¸­æ–‡æ˜ŸæœŸè½¬æ¢
private String getChineseWeekday(int dayOfWeek) {
    String[] weekdays = {"æ˜ŸæœŸä¸€", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸä¸‰", "æ˜ŸæœŸå››", "æ˜ŸæœŸäº”", "æ˜ŸæœŸå…­", "æ˜ŸæœŸæ—¥"};
    return weekdays[dayOfWeek - 1];
}
```

## ðŸ“ Configurationé…ç½®ç³»ç»Ÿ

### application.ymlé…ç½®ç»“æž„
```yaml
ai:
  prompt-templates:
    # åŸºç¡€ç³»ç»Ÿæç¤ºè¯
    basic-chat-system-prompt: |
      ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½AIåŠ©æ‰‹ï¼Œèƒ½å¤Ÿå“åº”ç”¨æˆ·çš„å„ç§é—®è¯¢...
      å½“å‰æ—¶é—´ï¼š{{datetime.year}}-{{datetime.month}}-{{datetime.day}} {{datetime.dayparts_zh}}{{datetime.hour}}ç‚¹ï¼Œ{{datetime.weekday_zh}}
      ç”¨æˆ·ä½ç½®ï¼š{{geo_info_location}}
    
    # æ·±åº¦æ€è€ƒæç¤ºè¯
    deep-thinking-system-prompt: |
      ä½ æ˜¯ä¸€ä¸ªå…·æœ‰æ·±åº¦æ€è€ƒèƒ½åŠ›çš„AIä¸“å®¶...
      ### 1. ã€åˆ†æžé—®é¢˜ã€‘
      ### 2. ã€æœé›†ä¿¡æ¯ã€‘
      ### 3. ã€æŽ¨ç†æ€è€ƒã€‘
      ### 4. ã€ç»¼åˆæ•´ç†ã€‘
      ### 5. ã€éªŒè¯ç­”æ¡ˆã€‘
    
    # ä¸“ä¸šé¢†åŸŸæç¤ºè¯
    technical-analysis-prompt: |
      è¯·è¿›è¡ŒæŠ€æœ¯æ€§åˆ†æžï¼Œä»Žä¸“ä¸šè§’åº¦æ·±å…¥æŽ¢è®¨...
    
    # äº¤äº’å¢žå¼ºæç¤ºè¯
    follow-up-question-prompt: |
      åŸºäºŽ{{question_type}}ç±»åž‹çš„é—®é¢˜å’Œ{{context}}ä¸Šä¸‹æ–‡...
```

## ðŸ”— ç³»ç»Ÿé›†æˆæ•ˆæžœ

### 1. **ThinkingExecutoré›†æˆ** ðŸ§ 
```java
@Autowired
public ThinkingExecutor(AiService aiService, PromptTemplates promptTemplates) {
    this.aiService = aiService;
    this.promptTemplates = promptTemplates;
}

// ç­–ç•¥æç¤ºè¯è‡ªåŠ¨èŽ·å–
String thinkingPrompt = promptTemplates.getThinkingStrategyPrompt(strategy.name());
```

### 2. **ResponseGeneratoré›†æˆ** ðŸ“
```java
@Autowired
public ResponseGenerator(AiService aiService, PromptTemplates promptTemplates) {
    this.aiService = aiService;
    this.promptTemplates = promptTemplates;
}

// æ ‡å‡†æ¶ˆæ¯æž„å»ºä½¿ç”¨æ¨¡æ¿
systemMessage.put("content", promptTemplates.getBasicChatSystemPrompt());
```

### 3. **PostProcessoré›†æˆ** ðŸ”„
```java
@Autowired
public PostProcessor(PromptTemplates promptTemplates) {
    this.promptTemplates = promptTemplates;
}

// è¿½é—®å»ºè®®ç”Ÿæˆä½¿ç”¨æ¨¡æ¿
String followUpPrompt = promptTemplates.getFollowUpPrompt(questionType, context);
```

## ðŸŽ¯ å®žé™…åº”ç”¨æ•ˆæžœ

### æµ‹è¯•éªŒè¯ç»“æžœ âœ…

#### 1. **åŸºç¡€å¯¹è¯æµ‹è¯•**
- âœ… æç¤ºè¯æ¨¡æ¿æ­£ç¡®åŠ è½½
- âœ… åŠ¨æ€å˜é‡æˆåŠŸæ¸²æŸ“
- âœ… ä¸­æ–‡æœ¬åœŸåŒ–è¡¨è¾¾å‡†ç¡®

#### 2. **æ·±åº¦æ€è€ƒæµ‹è¯•**
- âœ… æ€è€ƒç­–ç•¥è‡ªåŠ¨è¯†åˆ«ï¼š"é—®é¢˜è§£å†³"
- âœ… ä¸“ä¸šæç¤ºè¯æ¨¡æ¿ç”Ÿæ•ˆ
- âœ… ç»“æž„åŒ–æ€è€ƒæµç¨‹æ¸…æ™°

#### 3. **ç³»ç»Ÿé›†æˆæµ‹è¯•**
- âœ… æ‰€æœ‰ç»„ä»¶æ— ç¼é›†æˆ
- âœ… é…ç½®ç³»ç»Ÿæ­£å¸¸å·¥ä½œ
- âœ… æ¨¡æ¿åˆ‡æ¢æµç•…

## ðŸš€ æ ¸å¿ƒä¼˜åŠ¿

### 1. **æ¨¡å—åŒ–è®¾è®¡** ðŸ”§
- æç¤ºè¯æ¨¡æ¿ç‹¬ç«‹ç®¡ç†
- ç­–ç•¥ä¸Žæ¨¡æ¿è§£è€¦
- ä¾¿äºŽç»´æŠ¤å’Œæ‰©å±•

### 2. **æ™ºèƒ½åŒ–åŒ¹é…** ðŸŽ¯
- æ ¹æ®è¯·æ±‚ç±»åž‹è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„æç¤ºè¯
- æ”¯æŒæ€è€ƒç­–ç•¥å’Œç”Ÿæˆç­–ç•¥çš„æ™ºèƒ½è·¯ç”±
- åŠ¨æ€ä¸Šä¸‹æ–‡ä¿¡æ¯æ³¨å…¥

### 3. **æœ¬åœŸåŒ–æ”¯æŒ** ðŸ‡¨ðŸ‡³
- ä¸­æ–‡æ—¶é—´è¡¨è¾¾
- æœ¬åœ°åŒ–ç”¨æˆ·ä½“éªŒ
- ç¬¦åˆä¸­æ–‡ç”¨æˆ·ä¹ æƒ¯

### 4. **é…ç½®åŒ–ç®¡ç†** âš™ï¸
- YAMLé…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†
- æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ›´æ–°
- ä¾¿äºŽä¸åŒçŽ¯å¢ƒçš„é…ç½®

### 5. **æ‰©å±•æ€§å¼º** ðŸ“ˆ
- æ–°å¢žæç¤ºè¯æ¨¡æ¿ç®€å•
- æ”¯æŒè‡ªå®šä¹‰å˜é‡æ³¨å…¥
- é¢„ç•™å¤šç§æ‰©å±•æŽ¥å£

## ðŸ’Ž å‚è€ƒæ¥æºä¼˜åŠ¿

### å€Ÿé‰´å…ƒçŸ³ç§‘æŠ€å°ç™½æ™ºèƒ½åŠ©æ‰‹çš„ä¼˜ç§€è®¾è®¡ï¼š
1. **åˆ†å±‚æç¤ºè¯æž¶æž„**ï¼šç³»ç»Ÿçº§ã€ä¸“ä¸šçº§ã€ç­–ç•¥çº§ã€äº¤äº’çº§
2. **åŠ¨æ€æ¨¡æ¿æ¸²æŸ“**ï¼šæ—¶é—´ã€åœ°ç†ä½ç½®ç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯
3. **æ™ºèƒ½ç­–ç•¥åŒ¹é…**ï¼šæ ¹æ®é—®é¢˜ç±»åž‹è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æç¤ºè¯
4. **æœ¬åœŸåŒ–ä½“éªŒ**ï¼šä¸­æ–‡è¡¨è¾¾ä¹ æƒ¯å’Œæ–‡åŒ–èƒŒæ™¯è€ƒè™‘
5. **é…ç½®åŒ–ç®¡ç†**ï¼šä¾¿äºŽç»´æŠ¤å’Œå®šåˆ¶çš„é…ç½®ä½“ç³»

## ðŸ”® æœªæ¥æ‰©å±•æ–¹å‘

### 1. **å¤šè¯­è¨€æ”¯æŒ** ðŸŒ
- è‹±æ–‡ã€æ—¥æ–‡ç­‰å¤šè¯­è¨€æç¤ºè¯æ¨¡æ¿
- è‡ªåŠ¨è¯­è¨€æ£€æµ‹å’Œåˆ‡æ¢
- è·¨è¯­è¨€ä¸Šä¸‹æ–‡ä¿æŒ

### 2. **ä¸ªæ€§åŒ–å®šåˆ¶** ðŸ‘¤
- ç”¨æˆ·åå¥½å­¦ä¹ 
- ä¸ªæ€§åŒ–æç¤ºè¯è°ƒæ•´
- å¯¹è¯é£Žæ ¼è‡ªé€‚åº”

### 3. **æ™ºèƒ½ä¼˜åŒ–** ðŸ¤–
- A/Bæµ‹è¯•æ¡†æž¶
- æç¤ºè¯æ•ˆæžœè¯„ä¼°
- è‡ªåŠ¨ä¼˜åŒ–å»ºè®®

### 4. **å·¥å…·é›†æˆ** ðŸ”¨
- æœç´¢å¼•æ“Žè°ƒç”¨æç¤ºè¯
- çŸ¥è¯†åº“æŸ¥è¯¢æ¨¡æ¿
- å¤–éƒ¨APIé›†æˆæ¨¡æ¿

---

## ðŸŽ‰ æ€»ç»“

æˆ‘ä»¬æˆåŠŸå®žçŽ°äº†ä¸€å¥—**å®Œæ•´çš„æç¤ºè¯æ¨¡æ¿ç®¡ç†ç³»ç»Ÿ**ï¼Œå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒç‰¹æ€§ï¼š

âœ… **14ç§ä¸“ä¸šæç¤ºè¯æ¨¡æ¿**ï¼Œè¦†ç›–æ‰€æœ‰åº”ç”¨åœºæ™¯  
âœ… **æ™ºèƒ½ç­–ç•¥åŒ¹é…**ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ¨¡æ¿  
âœ… **åŠ¨æ€å˜é‡æ¸²æŸ“**ï¼Œå®žæ—¶ä¸Šä¸‹æ–‡ä¿¡æ¯æ³¨å…¥  
âœ… **ä¸­æ–‡æœ¬åœŸåŒ–**ï¼Œç¬¦åˆä¸­æ–‡ç”¨æˆ·ä¹ æƒ¯  
âœ… **é…ç½®åŒ–ç®¡ç†**ï¼Œä¾¿äºŽç»´æŠ¤å’Œæ‰©å±•  
âœ… **æ— ç¼ç³»ç»Ÿé›†æˆ**ï¼Œæ‰€æœ‰ç»„ä»¶ååŒå·¥ä½œ  

è¿™å¥—ç³»ç»Ÿä¸ä»…æå‡äº†AIåŠ©æ‰‹çš„**ä¸“ä¸šæ€§å’Œæ™ºèƒ½åŒ–æ°´å¹³**ï¼Œè¿˜ä¸ºåŽç»­åŠŸèƒ½æ‰©å±•æä¾›äº†**å¼ºå¤§çš„åŸºç¡€æ”¯æ’‘**ï¼

**å®žæ–½æ—¶é—´**: 2025-09-24 15:15:00  
**çŠ¶æ€**: âœ… å®Œæˆå¹¶æµ‹è¯•é€šè¿‡  
**æ•ˆæžœ**: ðŸš€ AIåŠ©æ‰‹ä¸“ä¸šæ€§å’Œç”¨æˆ·ä½“éªŒæ˜¾è‘—æå‡  
**æ ¸å¿ƒä»·å€¼**: ä»ŽåŸºç¡€å¯¹è¯åˆ°ä¸“ä¸šæ·±åº¦æ€è€ƒçš„å…¨é¢æç¤ºè¯æ”¯æŒï¼
