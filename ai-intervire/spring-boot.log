[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------< com.can:ai-assistant >------------------------
[INFO] Building ai-assistant 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.2.3:run (default-cli) > test-compile @ ai-assistant >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ ai-assistant ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 3 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ ai-assistant ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ ai-assistant ---
[INFO] skip non existing resourceDirectory /Users/can/Documents/ai/ai-intervire/src/test/resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ ai-assistant ---
[INFO] No sources to compile
[INFO] 
[INFO] <<< spring-boot:3.2.3:run (default-cli) < test-compile @ ai-assistant <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.2.3:run (default-cli) @ ai-assistant ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
[32m :: Spring Boot :: [39m              [2m (v3.2.3)[0;39m

16:00:54.974 [main] INFO  c.c.a.AiAssistantApplication - Starting AiAssistantApplication using Java 23.0.2 with PID 99685 (/Users/can/Documents/ai/ai-intervire/target/classes started by can in /Users/can/Documents/ai/ai-intervire)
16:00:54.975 [main] INFO  c.c.a.AiAssistantApplication - No active profile set, falling back to 1 default profile: "default"
16:00:55.334 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
16:00:55.339 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
16:00:55.339 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
16:00:55.357 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
16:00:55.358 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 363 ms
16:00:55.495 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
16:00:55.613 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
16:00:55.617 [main] INFO  c.c.a.AiAssistantApplication - Started AiAssistantApplication in 0.791 seconds (process running for 0.919)
16:00:55.618 [main] INFO  c.c.a.AiAssistantApplication - ===========================================
16:00:55.618 [main] INFO  c.c.a.AiAssistantApplication - AI智能助手启动成功！
16:00:55.618 [main] INFO  c.c.a.AiAssistantApplication - 访问地址: http://localhost:8081
16:00:55.618 [main] INFO  c.c.a.AiAssistantApplication - 健康检查: http://localhost:8081/api/ai/health
16:00:55.618 [main] INFO  c.c.a.AiAssistantApplication - ===========================================
16:01:14.363 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
16:01:14.364 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
16:01:14.365 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
16:01:14.435 [http-nio-8081-exec-1] INFO  c.c.a.controller.StreamController - === 流式聊天请求开始 ===
16:01:14.435 [http-nio-8081-exec-1] INFO  c.c.a.controller.StreamController - 会话ID: test456
16:01:14.436 [http-nio-8081-exec-1] INFO  c.c.a.controller.StreamController - 用户消息: 你好，我叫张三
16:01:14.436 [http-nio-8081-exec-1] INFO  c.c.a.controller.StreamController - 深度思考: false
16:01:14.436 [http-nio-8081-exec-1] INFO  c.c.a.controller.StreamController - 超时配置: 300000ms
16:01:14.439 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤖 智能体执行开始
16:01:14.439 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📋 执行预处理阶段
16:01:14.439 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - 🔄 开始预处理请求
16:01:14.439 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ✅ 请求预处理完成 - 会话: test456, 路由: 简单对话, 耗时: 0ms
16:01:14.440 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 预处理完成 - 路由: 简单对话, 耗时: 1ms
16:01:14.440 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🧠 执行内存加载阶段 - 会话: test456
16:01:14.440 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 🧠 加载上下文 - 会话: test456
16:01:14.441 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文加载完成 - 会话: test456, 历史记录: 0, 压缩后: 0, 耗时: 1ms
16:01:14.441 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存加载完成 - 耗时: 1ms
16:01:14.441 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📝 执行响应生成阶段 - 会话: test456
16:01:14.441 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 📝 响应生成开始 - 会话: test456, 路由: 简单对话
16:01:14.442 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🎯 生成策略: 简单生成 - 会话: test456
16:01:14.442 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 💬 执行简单生成
16:01:14.442 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证流式调用参数 - 会话: unknown
16:01:14.442 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式AI模型调用 - 会话: unknown, 模型: qwen-turbo, 消息数: 2
16:01:14.869 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 HTTP响应已接收 - 会话: unknown, 响应时间: 392ms, 状态码: 200
16:01:14.869 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 首个数据块已接收 - 会话: unknown, 首块延迟: 392ms
16:01:15.754 [pool-2-thread-1] WARN  c.can.aiassistant.service.AiService - Could not find sessionId for message history
16:01:15.865 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 流式响应结束标记 - 会话: unknown, 总块数: 10
16:01:15.866 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 流式响应处理完成 - 会话: unknown, 总耗时: 1424ms, 总块数: 10, 首块延迟: 392ms, 消息长度: 24字符
16:01:15.868 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ✅ 响应生成完成 - 会话: test456, 策略: 简单生成, 耗时: 1427ms
16:01:15.868 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 响应生成完成 - 耗时: 1427ms
16:01:15.868 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 💾 执行内存保存阶段 - 会话: test456
16:01:15.868 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 💾 保存上下文 - 会话: test456
16:01:15.871 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文保存完成 - 会话: test456, 耗时: 3ms
16:01:15.872 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存保存完成 - 耗时: 4ms
16:01:15.872 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🔄 执行后处理阶段 - 会话: test456
16:01:15.872 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🔄 后处理开始 - 会话: test456
16:01:15.884 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 详细分析报告 - 会话: test456 ===
16:01:15.884 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🎯 处理路由: 简单对话
16:01:15.884 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📊 质量评估: 总分={:.2f}, 完整性={:.2f}, 相关性={:.2f}, 清晰度={:.2f}, 效率={:.2f}
16:01:15.884 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ⏱️ 性能统计: 预处理=0ms, 总处理=2ms
16:01:15.884 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 💰 资源消耗: Tokens=0, 成本=0
16:01:15.885 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 分析报告结束 ===
16:01:15.885 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ✅ 后处理完成 - 会话: test456, 质量评分: {:.2f}, 耗时: 0.2ms
16:01:15.885 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 后处理完成 - 耗时: 13ms
16:01:15.885 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🎉 智能体执行完成 - 会话: test456, 总耗时: 1446ms
16:01:15.892 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - ✅ 流式聊天完成 - 会话: test456, 总处理时长: 1457ms
16:01:15.892 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - === 流式聊天请求结束 ===
16:01:21.861 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - === 流式聊天请求开始 ===
16:01:21.862 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - 会话ID: test456
16:01:21.862 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - 用户消息: 我刚才说我叫什么名字？
16:01:21.862 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - 深度思考: false
16:01:21.862 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - 超时配置: 300000ms
16:01:21.862 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤖 智能体执行开始
16:01:21.862 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📋 执行预处理阶段
16:01:21.862 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - 🔄 开始预处理请求
16:01:21.862 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ✅ 请求预处理完成 - 会话: test456, 路由: 标准对话, 耗时: 0ms
16:01:21.862 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 预处理完成 - 路由: 标准对话, 耗时: 0ms
16:01:21.862 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🧠 执行内存加载阶段 - 会话: test456
16:01:21.862 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 🧠 加载上下文 - 会话: test456
16:01:21.863 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文加载完成 - 会话: test456, 历史记录: 1, 压缩后: 1, 耗时: 1ms
16:01:21.863 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存加载完成 - 耗时: 1ms
16:01:21.863 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📝 执行响应生成阶段 - 会话: test456
16:01:21.863 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 📝 响应生成开始 - 会话: test456, 路由: 标准对话
16:01:21.863 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🎯 生成策略: 上下文感知生成 - 会话: test456
16:01:21.863 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🧠 执行上下文感知生成
16:01:21.864 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证流式调用参数 - 会话: test456
16:01:21.864 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式AI模型调用 - 会话: test456, 模型: qwen-turbo, 消息数: 3
16:01:22.066 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 HTTP响应已接收 - 会话: test456, 响应时间: 202ms, 状态码: 200
16:01:22.066 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 首个数据块已接收 - 会话: test456, 首块延迟: 202ms
16:01:23.055 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 流式响应结束标记 - 会话: test456, 总块数: 10
16:01:23.056 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 流式响应处理完成 - 会话: test456, 总耗时: 1192ms, 总块数: 10, 首块延迟: 202ms, 消息长度: 15字符
16:01:23.056 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ✅ 响应生成完成 - 会话: test456, 策略: 上下文感知生成, 耗时: 1193ms
16:01:23.056 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 响应生成完成 - 耗时: 1193ms
16:01:23.056 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 💾 执行内存保存阶段 - 会话: test456
16:01:23.056 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 💾 保存上下文 - 会话: test456
16:01:23.057 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文保存完成 - 会话: test456, 耗时: 1ms
16:01:23.057 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存保存完成 - 耗时: 1ms
16:01:23.057 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🔄 执行后处理阶段 - 会话: test456
16:01:23.057 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🔄 后处理开始 - 会话: test456
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 详细分析报告 - 会话: test456 ===
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🎯 处理路由: 标准对话
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📊 质量评估: 总分={:.2f}, 完整性={:.2f}, 相关性={:.2f}, 清晰度={:.2f}, 效率={:.2f}
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ⏱️ 性能统计: 预处理=0ms, 总处理=0ms
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 💰 资源消耗: Tokens=0, 成本=0
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 分析报告结束 ===
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ✅ 后处理完成 - 会话: test456, 质量评分: {:.2f}, 耗时: 0.2ms
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 后处理完成 - 耗时: 2ms
16:01:23.059 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🎉 智能体执行完成 - 会话: test456, 总耗时: 1197ms
16:01:23.060 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - ✅ 流式聊天完成 - 会话: test456, 总处理时长: 1199ms
16:01:23.060 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - === 流式聊天请求结束 ===
16:01:51.801 [http-nio-8081-exec-6] INFO  c.c.a.controller.StreamController - === 流式聊天请求开始 ===
16:01:51.802 [http-nio-8081-exec-6] INFO  c.c.a.controller.StreamController - 会话ID: test456
16:01:51.802 [http-nio-8081-exec-6] INFO  c.c.a.controller.StreamController - 用户消息: 请回顾我们之前的对话历史，我在第一条消息中介绍了自己的名字。
16:01:51.802 [http-nio-8081-exec-6] INFO  c.c.a.controller.StreamController - 深度思考: false
16:01:51.802 [http-nio-8081-exec-6] INFO  c.c.a.controller.StreamController - 超时配置: 300000ms
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤖 智能体执行开始
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📋 执行预处理阶段
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - 🔄 开始预处理请求
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ✅ 请求预处理完成 - 会话: test456, 路由: 标准对话, 耗时: 0ms
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 预处理完成 - 路由: 标准对话, 耗时: 0ms
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🧠 执行内存加载阶段 - 会话: test456
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 🧠 加载上下文 - 会话: test456
16:01:51.802 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文加载完成 - 会话: test456, 历史记录: 2, 压缩后: 2, 耗时: 0ms
16:01:51.803 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存加载完成 - 耗时: 1ms
16:01:51.803 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📝 执行响应生成阶段 - 会话: test456
16:01:51.803 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 📝 响应生成开始 - 会话: test456, 路由: 标准对话
16:01:51.803 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🎯 生成策略: 上下文感知生成 - 会话: test456
16:01:51.803 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🧠 执行上下文感知生成
16:01:51.803 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证流式调用参数 - 会话: test456
16:01:51.803 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式AI模型调用 - 会话: test456, 模型: qwen-turbo, 消息数: 4
16:01:52.045 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 HTTP响应已接收 - 会话: test456, 响应时间: 242ms, 状态码: 200
16:01:52.045 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 首个数据块已接收 - 会话: test456, 首块延迟: 242ms
16:01:53.244 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 流式响应结束标记 - 会话: test456, 总块数: 12
16:01:53.245 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 流式响应处理完成 - 会话: test456, 总耗时: 1442ms, 总块数: 12, 首块延迟: 242ms, 消息长度: 36字符
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ✅ 响应生成完成 - 会话: test456, 策略: 上下文感知生成, 耗时: 1442ms
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 响应生成完成 - 耗时: 1442ms
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 💾 执行内存保存阶段 - 会话: test456
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 💾 保存上下文 - 会话: test456
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文保存完成 - 会话: test456, 耗时: 0ms
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存保存完成 - 耗时: 0ms
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🔄 执行后处理阶段 - 会话: test456
16:01:53.245 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🔄 后处理开始 - 会话: test456
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 详细分析报告 - 会话: test456 ===
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🎯 处理路由: 标准对话
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📊 质量评估: 总分={:.2f}, 完整性={:.2f}, 相关性={:.2f}, 清晰度={:.2f}, 效率={:.2f}
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ⏱️ 性能统计: 预处理=0ms, 总处理=0ms
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 💰 资源消耗: Tokens=0, 成本=0
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 分析报告结束 ===
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ✅ 后处理完成 - 会话: test456, 质量评分: {:.2f}, 耗时: 0.2ms
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 后处理完成 - 耗时: 2ms
16:01:53.247 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🎉 智能体执行完成 - 会话: test456, 总耗时: 1445ms
16:01:53.248 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - ✅ 流式聊天完成 - 会话: test456, 总处理时长: 1447ms
16:01:53.248 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - === 流式聊天请求结束 ===
16:02:02.189 [http-nio-8081-exec-8] INFO  c.c.a.controller.StreamController - === 流式聊天请求开始 ===
16:02:02.189 [http-nio-8081-exec-8] INFO  c.c.a.controller.StreamController - 会话ID: new_session_999
16:02:02.189 [http-nio-8081-exec-8] INFO  c.c.a.controller.StreamController - 用户消息: 我之前说我叫什么名字？
16:02:02.189 [http-nio-8081-exec-8] INFO  c.c.a.controller.StreamController - 深度思考: false
16:02:02.189 [http-nio-8081-exec-8] INFO  c.c.a.controller.StreamController - 超时配置: 300000ms
16:02:02.189 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤖 智能体执行开始
16:02:02.189 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📋 执行预处理阶段
16:02:02.189 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - 🔄 开始预处理请求
16:02:02.189 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ✅ 请求预处理完成 - 会话: new_session_999, 路由: 标准对话, 耗时: 0ms
16:02:02.189 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 预处理完成 - 路由: 标准对话, 耗时: 0ms
16:02:02.189 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🧠 执行内存加载阶段 - 会话: new_session_999
16:02:02.189 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 🧠 加载上下文 - 会话: new_session_999
16:02:02.190 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文加载完成 - 会话: new_session_999, 历史记录: 0, 压缩后: 0, 耗时: 1ms
16:02:02.190 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存加载完成 - 耗时: 1ms
16:02:02.190 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📝 执行响应生成阶段 - 会话: new_session_999
16:02:02.190 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 📝 响应生成开始 - 会话: new_session_999, 路由: 标准对话
16:02:02.190 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🎯 生成策略: 上下文感知生成 - 会话: new_session_999
16:02:02.190 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🧠 执行上下文感知生成
16:02:02.190 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证流式调用参数 - 会话: new_session_999
16:02:02.190 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式AI模型调用 - 会话: new_session_999, 模型: qwen-turbo, 消息数: 2
16:02:02.370 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 HTTP响应已接收 - 会话: new_session_999, 响应时间: 180ms, 状态码: 200
16:02:02.370 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 首个数据块已接收 - 会话: new_session_999, 首块延迟: 180ms
16:02:03.556 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 流式响应结束标记 - 会话: new_session_999, 总块数: 12
16:02:03.556 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 流式响应处理完成 - 会话: new_session_999, 总耗时: 1366ms, 总块数: 12, 首块延迟: 180ms, 消息长度: 38字符
16:02:03.556 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ✅ 响应生成完成 - 会话: new_session_999, 策略: 上下文感知生成, 耗时: 1366ms
16:02:03.557 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 响应生成完成 - 耗时: 1367ms
16:02:03.557 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 💾 执行内存保存阶段 - 会话: new_session_999
16:02:03.557 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 💾 保存上下文 - 会话: new_session_999
16:02:03.557 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文保存完成 - 会话: new_session_999, 耗时: 0ms
16:02:03.557 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存保存完成 - 耗时: 0ms
16:02:03.557 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🔄 执行后处理阶段 - 会话: new_session_999
16:02:03.557 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🔄 后处理开始 - 会话: new_session_999
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 详细分析报告 - 会话: new_session_999 ===
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🎯 处理路由: 标准对话
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📊 质量评估: 总分={:.2f}, 完整性={:.2f}, 相关性={:.2f}, 清晰度={:.2f}, 效率={:.2f}
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ⏱️ 性能统计: 预处理=0ms, 总处理=0ms
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 💰 资源消耗: Tokens=0, 成本=0
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 分析报告结束 ===
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ✅ 后处理完成 - 会话: new_session_999, 质量评分: {:.2f}, 耗时: 0.2ms
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 后处理完成 - 耗时: 2ms
16:02:03.559 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🎉 智能体执行完成 - 会话: new_session_999, 总耗时: 1370ms
16:02:03.560 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - ✅ 流式聊天完成 - 会话: new_session_999, 总处理时长: 1371ms
16:02:03.560 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - === 流式聊天请求结束 ===
16:02:48.791 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - === 流式聊天请求开始 ===
16:02:48.791 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - 会话ID: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:02:48.791 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - 用户消息: 我叫张三，应该改个什么名字更好
16:02:48.791 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - 深度思考: true
16:02:48.791 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - 超时配置: 300000ms
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤖 智能体执行开始
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📋 执行预处理阶段
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - 🔄 开始预处理请求
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ✅ 请求预处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 路由: 简单深度思考, 耗时: 0ms
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 预处理完成 - 路由: 简单深度思考, 耗时: 0ms
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🧠 执行内存加载阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 🧠 加载上下文 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文加载完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 历史记录: 0, 压缩后: 0, 耗时: 0ms
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存加载完成 - 耗时: 0ms
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤔 执行思考阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:02:48.792 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - 🧠 思考执行器开始 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:02:48.793 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - 🎯 思考策略: 通用思考 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:02:48.795 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🧠 开始构建自定义深度思考消息 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:02:48.795 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证思考模型调用参数 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 模型: qwen-max
16:02:48.795 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式思考模型调用 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 模型: qwen-max, 消息数: 2
16:02:49.350 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 思考模型HTTP响应已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 响应时间: 555ms, 状态码: 200
16:02:49.351 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 思考模型首个数据块已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 首块延迟: 556ms
16:03:15.190 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 思考模型流式响应结束 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总块数: 88
16:03:15.192 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 思考模型流式响应处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 26397ms, 总块数: 88, 首块延迟: 556ms, 思考内容长度: 756字符
16:03:15.193 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🤖 策略思考模型调用完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 耗时: 26398ms
16:03:15.193 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 策略思考步骤完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 26398ms
16:03:15.194 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - ✅ 思考执行完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 策略: 通用思考, 耗时: 26402ms
16:03:15.194 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 思考阶段完成 - 耗时: 26402ms
16:03:15.194 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📝 执行响应生成阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:15.194 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 📝 响应生成开始 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 路由: 简单深度思考
16:03:15.194 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🎯 生成策略: 基于思考生成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:15.194 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🤔 执行基于思考的生成
16:03:15.196 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证流式调用参数 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:15.196 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式AI模型调用 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 模型: qwen-turbo, 消息数: 3
16:03:15.416 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 HTTP响应已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 响应时间: 219ms, 状态码: 200
16:03:15.417 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 首个数据块已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 首块延迟: 220ms
16:03:19.418 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 流式响应结束标记 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总块数: 38
16:03:19.418 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 流式响应处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 4222ms, 总块数: 38, 首块延迟: 220ms, 消息长度: 207字符
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ✅ 响应生成完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 策略: 基于思考生成, 耗时: 4225ms
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 响应生成完成 - 耗时: 4225ms
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 💾 执行内存保存阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 💾 保存上下文 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文保存完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 耗时: 0ms
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存保存完成 - 耗时: 0ms
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🔄 执行后处理阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:19.419 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🔄 后处理开始 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:19.420 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 详细分析报告 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a ===
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🎯 处理路由: 简单深度思考
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📊 质量评估: 总分={:.2f}, 完整性={:.2f}, 相关性={:.2f}, 清晰度={:.2f}, 效率={:.2f}
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ⏱️ 性能统计: 预处理=0ms, 总处理=0ms
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 💰 资源消耗: Tokens=0, 成本=0
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 分析报告结束 ===
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ✅ 后处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 质量评分: {:.2f}, 耗时: 0.2ms
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 后处理完成 - 耗时: 2ms
16:03:19.421 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🎉 智能体执行完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 30629ms
16:03:19.422 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - ✅ 流式聊天完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总处理时长: 30631ms
16:03:19.422 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - === 流式聊天请求结束 ===
16:03:58.228 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - === 流式聊天请求开始 ===
16:03:58.229 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - 会话ID: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:58.229 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - 用户消息: 生日是1024
16:03:58.229 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - 深度思考: true
16:03:58.229 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - 超时配置: 300000ms
16:03:58.229 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤖 智能体执行开始
16:03:58.229 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📋 执行预处理阶段
16:03:58.229 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - 🔄 开始预处理请求
16:03:58.229 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ✅ 请求预处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 路由: 简单深度思考, 耗时: 0ms
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 预处理完成 - 路由: 简单深度思考, 耗时: 1ms
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🧠 执行内存加载阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 🧠 加载上下文 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文加载完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 历史记录: 1, 压缩后: 1, 耗时: 0ms
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存加载完成 - 耗时: 0ms
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🤔 执行思考阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - 🧠 思考执行器开始 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:58.230 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - 🎯 思考策略: 通用思考 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:58.231 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🧠 开始构建自定义深度思考消息 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:03:58.232 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证思考模型调用参数 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 模型: qwen-max
16:03:58.232 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式思考模型调用 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 模型: qwen-max, 消息数: 2
16:03:58.638 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 思考模型HTTP响应已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 响应时间: 406ms, 状态码: 200
16:03:58.638 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 思考模型首个数据块已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 首块延迟: 406ms
16:04:28.449 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 思考模型流式响应结束 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总块数: 90
16:04:28.450 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 思考模型流式响应处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 30218ms, 总块数: 90, 首块延迟: 406ms, 思考内容长度: 748字符
16:04:28.451 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🤖 策略思考模型调用完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 耗时: 30219ms
16:04:28.451 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 策略思考步骤完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 30220ms
16:04:28.452 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - ✅ 思考执行完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 策略: 通用思考, 耗时: 30222ms
16:04:28.452 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 思考阶段完成 - 耗时: 30222ms
16:04:28.452 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 📝 执行响应生成阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:04:28.452 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 📝 响应生成开始 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 路由: 简单深度思考
16:04:28.452 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🎯 生成策略: 基于思考生成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:04:28.452 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - 🤔 执行基于思考的生成
16:04:28.452 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🔍 开始验证流式调用参数 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:04:28.452 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 📡 开始流式AI模型调用 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 模型: qwen-turbo, 消息数: 3
16:04:28.657 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🌐 HTTP响应已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 响应时间: 204ms, 状态码: 200
16:04:28.659 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ⚡ 首个数据块已接收 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 首块延迟: 205ms
16:04:30.266 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - 🏁 流式响应结束标记 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总块数: 16
16:04:30.266 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ✅ 流式响应处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 1814ms, 总块数: 16, 首块延迟: 205ms, 消息长度: 65字符
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ✅ 响应生成完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 策略: 基于思考生成, 耗时: 1815ms
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 响应生成完成 - 耗时: 1815ms
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 💾 执行内存保存阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - 💾 保存上下文 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ✅ 上下文保存完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 耗时: 0ms
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 内存保存完成 - 耗时: 0ms
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🔄 执行后处理阶段 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:04:30.267 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🔄 后处理开始 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 详细分析报告 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a ===
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 🎯 处理路由: 简单深度思考
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📊 质量评估: 总分={:.2f}, 完整性={:.2f}, 相关性={:.2f}, 清晰度={:.2f}, 效率={:.2f}
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ⏱️ 性能统计: 预处理=0ms, 总处理=0ms
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 💰 资源消耗: Tokens=0, 成本=0
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - 📋 === 分析报告结束 ===
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ✅ 后处理完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 质量评分: {:.2f}, 耗时: 0.2ms
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ✅ 后处理完成 - 耗时: 2ms
16:04:30.269 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - 🎉 智能体执行完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总耗时: 32040ms
16:04:30.272 [http-nio-8081-exec-6] INFO  c.c.a.controller.StreamController - ✅ 流式聊天完成 - 会话: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, 总处理时长: 32044ms
16:04:30.272 [http-nio-8081-exec-6] INFO  c.c.a.controller.StreamController - === 流式聊天请求结束 ===
