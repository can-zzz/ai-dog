[INFO] Scanning for projects...
[INFO] 
[INFO] ------------------------< com.can:ai-assistant >------------------------
[INFO] Building ai-assistant 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.2.3:run (default-cli) > test-compile @ ai-assistant >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ ai-assistant ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 3 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.11.0:compile (default-compile) @ ai-assistant ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ ai-assistant ---
[INFO] skip non existing resourceDirectory /Users/can/Documents/ai/ai-intervire/src/test/resources
[INFO] 
[INFO] --- compiler:3.11.0:testCompile (default-testCompile) @ ai-assistant ---
[INFO] No sources to compile
[INFO] 
[INFO] <<< spring-boot:3.2.3:run (default-cli) < test-compile @ ai-assistant <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.2.3:run (default-cli) @ ai-assistant ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
[32m :: Spring Boot :: [39m              [2m (v3.2.3)[0;39m

15:14:09.330 [main] INFO  c.c.a.AiAssistantApplication - Starting AiAssistantApplication using Java 23.0.2 with PID 93202 (/Users/can/Documents/ai/ai-intervire/target/classes started by can in /Users/can/Documents/ai/ai-intervire)
15:14:09.331 [main] INFO  c.c.a.AiAssistantApplication - No active profile set, falling back to 1 default profile: "default"
15:14:09.713 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
15:14:09.720 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
15:14:09.720 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
15:14:09.745 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
15:14:09.746 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 395 ms
15:14:09.895 [main] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
15:14:09.989 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path ''
15:14:09.992 [main] INFO  c.c.a.AiAssistantApplication - Started AiAssistantApplication in 0.824 seconds (process running for 0.964)
15:14:09.993 [main] INFO  c.c.a.AiAssistantApplication - ===========================================
15:14:09.993 [main] INFO  c.c.a.AiAssistantApplication - AIæ™ºèƒ½åŠ©æ‰‹å¯åŠ¨æˆåŠŸï¼
15:14:09.993 [main] INFO  c.c.a.AiAssistantApplication - è®¿é—®åœ°å€: http://localhost:8081
15:14:09.993 [main] INFO  c.c.a.AiAssistantApplication - å¥åº·æ£€æŸ¥: http://localhost:8081/api/ai/health
15:14:09.993 [main] INFO  c.c.a.AiAssistantApplication - ===========================================
15:14:29.160 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
15:14:29.160 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
15:14:29.161 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
15:14:37.134 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚å¼€å§‹ ===
15:14:37.134 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - ä¼šè¯ID: prompt-test-basic
15:14:37.135 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - ç”¨æˆ·æ¶ˆæ¯: ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±
15:14:37.135 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - æ·±åº¦æ€è€ƒ: false
15:14:37.135 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - è¶…æ—¶é…ç½®: 300000ms
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ¤– æ™ºèƒ½ä½“æ‰§è¡Œå¼€å§‹
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ“‹ æ‰§è¡Œé¢„å¤„ç†é˜¶æ®µ
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ðŸ”„ å¼€å§‹é¢„å¤„ç†è¯·æ±‚
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - âœ… è¯·æ±‚é¢„å¤„ç†å®Œæˆ - ä¼šè¯: prompt-test-basic, è·¯ç”±: ç®€å•å¯¹è¯, è€—æ—¶: 0ms
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… é¢„å¤„ç†å®Œæˆ - è·¯ç”±: ç®€å•å¯¹è¯, è€—æ—¶: 0ms
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ§  æ‰§è¡Œå†…å­˜åŠ è½½é˜¶æ®µ - ä¼šè¯: prompt-test-basic
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ðŸ§  åŠ è½½ä¸Šä¸‹æ–‡ - ä¼šè¯: prompt-test-basic
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡åŠ è½½å®Œæˆ - ä¼šè¯: prompt-test-basic, åŽ†å²è®°å½•: 0, åŽ‹ç¼©åŽ: 0, è€—æ—¶: 0ms
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜åŠ è½½å®Œæˆ - è€—æ—¶: 0ms
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ“ æ‰§è¡Œå“åº”ç”Ÿæˆé˜¶æ®µ - ä¼šè¯: prompt-test-basic
15:14:37.137 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ðŸ“ å“åº”ç”Ÿæˆå¼€å§‹ - ä¼šè¯: prompt-test-basic, è·¯ç”±: ç®€å•å¯¹è¯
15:14:37.138 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ðŸŽ¯ ç”Ÿæˆç­–ç•¥: ç®€å•ç”Ÿæˆ - ä¼šè¯: prompt-test-basic
15:14:37.138 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ðŸ’¬ æ‰§è¡Œç®€å•ç”Ÿæˆ
15:14:37.138 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æµå¼è°ƒç”¨å‚æ•° - ä¼šè¯: unknown
15:14:37.138 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼AIæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: unknown, æ¨¡åž‹: qwen-turbo, æ¶ˆæ¯æ•°: 2
15:14:37.657 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸŒ HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: unknown, å“åº”æ—¶é—´: 511ms, çŠ¶æ€ç : 200
15:14:37.657 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - âš¡ é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: unknown, é¦–å—å»¶è¿Ÿ: 511ms
15:14:38.210 [pool-2-thread-1] ERROR c.c.a.controller.StreamController - Error sending stream response: java.io.IOException: Broken pipe
15:14:38.210 [http-nio-8081-exec-3] ERROR c.c.a.controller.StreamController - âŒ æµå¼èŠå¤©å‘ç”Ÿé”™è¯¯ - ä¼šè¯: prompt-test-basic, é”™è¯¯: Broken pipe, å¤„ç†æ—¶é•¿: 1076ms
15:14:38.217 [http-nio-8081-exec-3] ERROR c.c.a.e.GlobalExceptionHandler - Unexpected exception occurred: Broken pipe
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:135)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.ResponseGenerator$5.onResponse(ResponseGenerator.java:252)
	at com.can.aiassistant.service.AiService.lambda$streamCallAiModel$1(AiService.java:528)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallAiModel(AiService.java:473)
	at com.can.aiassistant.service.ResponseGenerator.executeSimpleGeneration(ResponseGenerator.java:246)
	at com.can.aiassistant.service.ResponseGenerator.executeGenerationStrategy(ResponseGenerator.java:124)
	at com.can.aiassistant.service.ResponseGenerator.generateResponse(ResponseGenerator.java:60)
	at com.can.aiassistant.service.AgentExecutor.executeResponseGeneration(AgentExecutor.java:173)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:72)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:38.219 [http-nio-8081-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Failure in @ExceptionHandler com.can.aiassistant.exception.GlobalExceptionHandler#handleGenericException(Exception)
org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.HashMap] with preset Content-Type 'text/event-stream'
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:319)
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:432)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:74)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:175)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1357)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1160)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:520)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:463)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:343)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308)
	at org.apache.catalina.core.AsyncContextImpl.setErrorState(AsyncContextImpl.java:430)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:155)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:38.220 [http-nio-8081-exec-3] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:135)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.ResponseGenerator$5.onResponse(ResponseGenerator.java:252)
	at com.can.aiassistant.service.AiService.lambda$streamCallAiModel$1(AiService.java:528)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallAiModel(AiService.java:473)
	at com.can.aiassistant.service.ResponseGenerator.executeSimpleGeneration(ResponseGenerator.java:246)
	at com.can.aiassistant.service.ResponseGenerator.executeGenerationStrategy(ResponseGenerator.java:124)
	at com.can.aiassistant.service.ResponseGenerator.generateResponse(ResponseGenerator.java:60)
	at com.can.aiassistant.service.AgentExecutor.executeResponseGeneration(AgentExecutor.java:173)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:72)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:38.220 [http-nio-8081-exec-3] ERROR o.a.c.c.C.[Tomcat].[localhost] - Exception Processing [ErrorPage[errorCode=0, location=/error]]
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:135)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.ResponseGenerator$5.onResponse(ResponseGenerator.java:252)
	at com.can.aiassistant.service.AiService.lambda$streamCallAiModel$1(AiService.java:528)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallAiModel(AiService.java:473)
	at com.can.aiassistant.service.ResponseGenerator.executeSimpleGeneration(ResponseGenerator.java:246)
	at com.can.aiassistant.service.ResponseGenerator.executeGenerationStrategy(ResponseGenerator.java:124)
	at com.can.aiassistant.service.ResponseGenerator.generateResponse(ResponseGenerator.java:60)
	at com.can.aiassistant.service.AgentExecutor.executeResponseGeneration(AgentExecutor.java:173)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:72)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:38.221 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - âœ… æµå¼èŠå¤©å®Œæˆ - ä¼šè¯: prompt-test-basic, æ€»å¤„ç†æ—¶é•¿: 1087ms
15:14:38.221 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚ç»“æŸ ===
15:14:38.319 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - âœ… å“åº”ç”Ÿæˆå®Œæˆ - ä¼šè¯: prompt-test-basic, ç­–ç•¥: ç®€å•ç”Ÿæˆ, å“åº”é•¿åº¦: 21, è€—æ—¶: 1182ms
15:14:38.320 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… å“åº”ç”Ÿæˆå®Œæˆ - è€—æ—¶: 1183ms
15:14:38.320 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ’¾ æ‰§è¡Œå†…å­˜ä¿å­˜é˜¶æ®µ - ä¼šè¯: prompt-test-basic
15:14:38.320 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ðŸ’¾ ä¿å­˜ä¸Šä¸‹æ–‡ - ä¼šè¯: prompt-test-basic
15:14:38.320 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡ä¿å­˜å®Œæˆ - ä¼šè¯: prompt-test-basic, è€—æ—¶: 0ms
15:14:38.321 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜ä¿å­˜å®Œæˆ - è€—æ—¶: 1ms
15:14:38.321 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ”„ æ‰§è¡ŒåŽå¤„ç†é˜¶æ®µ - ä¼šè¯: prompt-test-basic
15:14:38.321 [pool-2-thread-1] INFO  c.c.a.service.PostProcessor - ðŸ”„ åŽå¤„ç†å¼€å§‹ - ä¼šè¯: prompt-test-basic
15:14:38.321 [pool-2-thread-1] ERROR c.c.a.service.PostProcessor - âŒ åŽå¤„ç†å¤±è´¥ - ä¼šè¯: prompt-test-basic, é”™è¯¯: ResponseBodyEmitter has already completed, è€—æ—¶: 0ms
15:14:38.321 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… åŽå¤„ç†å®Œæˆ - è€—æ—¶: 0ms
15:14:38.321 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸŽ‰ æ™ºèƒ½ä½“æ‰§è¡Œå®Œæˆ - ä¼šè¯: prompt-test-basic, æ€»è€—æ—¶: 1184ms
15:14:45.219 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚å¼€å§‹ ===
15:14:45.219 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - ä¼šè¯ID: prompt-test-thinking
15:14:45.219 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - ç”¨æˆ·æ¶ˆæ¯: å¦‚ä½•å­¦ä¹ ç¼–ç¨‹
15:14:45.219 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - æ·±åº¦æ€è€ƒ: true
15:14:45.219 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - è¶…æ—¶é…ç½®: 300000ms
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ¤– æ™ºèƒ½ä½“æ‰§è¡Œå¼€å§‹
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ“‹ æ‰§è¡Œé¢„å¤„ç†é˜¶æ®µ
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - ðŸ”„ å¼€å§‹é¢„å¤„ç†è¯·æ±‚
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.RequestPreprocessor - âœ… è¯·æ±‚é¢„å¤„ç†å®Œæˆ - ä¼šè¯: prompt-test-thinking, è·¯ç”±: å¤æ‚æ·±åº¦æ€è€ƒ+å·¥å…·, è€—æ—¶: 0ms
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… é¢„å¤„ç†å®Œæˆ - è·¯ç”±: å¤æ‚æ·±åº¦æ€è€ƒ+å·¥å…·, è€—æ—¶: 0ms
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ§  æ‰§è¡Œå†…å­˜åŠ è½½é˜¶æ®µ - ä¼šè¯: prompt-test-thinking
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - ðŸ§  åŠ è½½ä¸Šä¸‹æ–‡ - ä¼šè¯: prompt-test-thinking
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡åŠ è½½å®Œæˆ - ä¼šè¯: prompt-test-thinking, åŽ†å²è®°å½•: 0, åŽ‹ç¼©åŽ: 0, è€—æ—¶: 0ms
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜åŠ è½½å®Œæˆ - è€—æ—¶: 0ms
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ¤” æ‰§è¡Œæ€è€ƒé˜¶æ®µ - ä¼šè¯: prompt-test-thinking
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - ðŸ§  æ€è€ƒæ‰§è¡Œå™¨å¼€å§‹ - ä¼šè¯: prompt-test-thinking
15:14:45.220 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - ðŸŽ¯ æ€è€ƒç­–ç•¥: é—®é¢˜è§£å†³ - ä¼šè¯: prompt-test-thinking
15:14:45.223 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸ§  å¼€å§‹æž„å»ºæ·±åº¦æ€è€ƒæ¶ˆæ¯ - ä¼šè¯: prompt-test-thinking
15:14:45.223 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸ¤– å¼€å§‹è°ƒç”¨æ€è€ƒæ¨¡åž‹ - ä¼šè¯: prompt-test-thinking, æ¨¡åž‹: qwen-max
15:14:45.223 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æ€è€ƒæ¨¡åž‹è°ƒç”¨å‚æ•° - ä¼šè¯: prompt-test-thinking, æ¨¡åž‹: qwen-max
15:14:45.223 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: prompt-test-thinking, æ¨¡åž‹: qwen-max, æ¶ˆæ¯æ•°: 2
15:14:45.527 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸŒ æ€è€ƒæ¨¡åž‹HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: prompt-test-thinking, å“åº”æ—¶é—´: 303ms, çŠ¶æ€ç : 200
15:14:45.527 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - âš¡ æ€è€ƒæ¨¡åž‹é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: prompt-test-thinking, é¦–å—å»¶è¿Ÿ: 303ms
15:14:48.057 [pool-2-thread-1] ERROR c.c.a.controller.StreamController - Error sending stream response: java.io.IOException: Broken pipe
15:14:48.057 [http-nio-8081-exec-5] ERROR c.c.a.controller.StreamController - âŒ æµå¼èŠå¤©å‘ç”Ÿé”™è¯¯ - ä¼šè¯: prompt-test-thinking, é”™è¯¯: Broken pipe, å¤„ç†æ—¶é•¿: 2838ms
15:14:48.058 [http-nio-8081-exec-5] ERROR c.c.a.e.GlobalExceptionHandler - Unexpected exception occurred: Broken pipe
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:135)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.AiService.lambda$streamCallThinkingModel$0(AiService.java:303)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallThinkingModel(AiService.java:243)
	at com.can.aiassistant.service.AiService.streamThinkingSteps(AiService.java:171)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinkingWithStrategy(ThinkingExecutor.java:191)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinking(ThinkingExecutor.java:72)
	at com.can.aiassistant.service.AgentExecutor.executeThinking(AgentExecutor.java:146)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:63)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:48.059 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Failure in @ExceptionHandler com.can.aiassistant.exception.GlobalExceptionHandler#handleGenericException(Exception)
org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.HashMap] with preset Content-Type 'text/event-stream'
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:319)
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:432)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:74)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:175)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1357)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1160)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:520)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:463)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:343)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308)
	at org.apache.catalina.core.AsyncContextImpl.setErrorState(AsyncContextImpl.java:430)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:155)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:48.060 [http-nio-8081-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:135)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.AiService.lambda$streamCallThinkingModel$0(AiService.java:303)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallThinkingModel(AiService.java:243)
	at com.can.aiassistant.service.AiService.streamThinkingSteps(AiService.java:171)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinkingWithStrategy(ThinkingExecutor.java:191)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinking(ThinkingExecutor.java:72)
	at com.can.aiassistant.service.AgentExecutor.executeThinking(AgentExecutor.java:146)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:63)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:48.061 [http-nio-8081-exec-5] ERROR o.a.c.c.C.[Tomcat].[localhost] - Exception Processing [ErrorPage[errorCode=0, location=/error]]
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at org.springframework.util.StreamUtils.copy(StreamUtils.java:135)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:128)
	at org.springframework.http.converter.StringHttpMessageConverter.writeInternal(StringHttpMessageConverter.java:44)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.AiService.lambda$streamCallThinkingModel$0(AiService.java:303)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallThinkingModel(AiService.java:243)
	at com.can.aiassistant.service.AiService.streamThinkingSteps(AiService.java:171)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinkingWithStrategy(ThinkingExecutor.java:191)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinking(ThinkingExecutor.java:72)
	at com.can.aiassistant.service.AgentExecutor.executeThinking(AgentExecutor.java:146)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:63)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:14:48.061 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - âœ… æµå¼èŠå¤©å®Œæˆ - ä¼šè¯: prompt-test-thinking, æ€»å¤„ç†æ—¶é•¿: 2842ms
15:14:48.061 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚ç»“æŸ ===
15:15:18.422 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - ðŸ¤– æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨å®Œæˆ - ä¼šè¯: prompt-test-thinking, è€—æ—¶: 33199ms
15:15:18.423 [pool-2-thread-1] INFO  c.can.aiassistant.service.AiService - âœ… æ€è€ƒæ­¥éª¤æµå¼è¾“å‡ºå®Œæˆ - ä¼šè¯: prompt-test-thinking, æ€»è€—æ—¶: 33200ms
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.ThinkingExecutor - âœ… æ€è€ƒæ‰§è¡Œå®Œæˆ - ä¼šè¯: prompt-test-thinking, ç­–ç•¥: é—®é¢˜è§£å†³, è€—æ—¶: 33204ms
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… æ€è€ƒé˜¶æ®µå®Œæˆ - è€—æ—¶: 33204ms
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ”§ æ‰§è¡Œå‡½æ•°è°ƒç”¨é˜¶æ®µ - ä¼šè¯: prompt-test-thinking
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - âœ… å‡½æ•°è°ƒç”¨å®Œæˆ - è€—æ—¶: 0ms
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.AgentExecutor - ðŸ“ æ‰§è¡Œå“åº”ç”Ÿæˆé˜¶æ®µ - ä¼šè¯: prompt-test-thinking
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ðŸ“ å“åº”ç”Ÿæˆå¼€å§‹ - ä¼šè¯: prompt-test-thinking, è·¯ç”±: å¤æ‚æ·±åº¦æ€è€ƒ+å·¥å…·
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ðŸŽ¯ ç”Ÿæˆç­–ç•¥: åŸºäºŽæ€è€ƒç”Ÿæˆ - ä¼šè¯: prompt-test-thinking
15:15:18.424 [pool-2-thread-1] INFO  c.c.a.service.ResponseGenerator - ðŸ¤” æ‰§è¡ŒåŸºäºŽæ€è€ƒçš„ç”Ÿæˆ
15:15:18.424 [pool-2-thread-1] ERROR c.c.a.service.ResponseGenerator - âŒ å“åº”ç”Ÿæˆå¤±è´¥ - ä¼šè¯: prompt-test-thinking, é”™è¯¯: ResponseBodyEmitter has already completed, è€—æ—¶: 0ms
15:15:18.425 [pool-2-thread-1] ERROR c.c.a.service.AgentExecutor - âŒ æ™ºèƒ½ä½“æ‰§è¡Œå¤±è´¥ - é”™è¯¯: ResponseBodyEmitter has already completed, è€—æ—¶: 33205ms
15:15:18.425 [pool-2-thread-1] ERROR c.c.a.controller.StreamController - Stream chat error: ResponseBodyEmitter has already completed
Exception in thread "pool-2-thread-1" java.lang.IllegalStateException: ResponseBodyEmitter has already completed
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:223)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:99)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:17:52.031 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚å¼€å§‹ ===
15:17:52.032 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - ä¼šè¯ID: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:17:52.032 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - ç”¨æˆ·æ¶ˆæ¯: trcvgbhjn
15:17:52.032 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - æ·±åº¦æ€è€ƒ: true
15:17:52.032 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - è¶…æ—¶é…ç½®: 300000ms
15:17:52.032 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ¤– æ™ºèƒ½ä½“æ‰§è¡Œå¼€å§‹
15:17:52.032 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“‹ æ‰§è¡Œé¢„å¤„ç†é˜¶æ®µ
15:17:52.032 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - ðŸ”„ å¼€å§‹é¢„å¤„ç†è¯·æ±‚
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - âœ… è¯·æ±‚é¢„å¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ, è€—æ—¶: 1ms
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… é¢„å¤„ç†å®Œæˆ - è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ, è€—æ—¶: 1ms
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ§  æ‰§è¡Œå†…å­˜åŠ è½½é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - ðŸ§  åŠ è½½ä¸Šä¸‹æ–‡ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡åŠ è½½å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, åŽ†å²è®°å½•: 0, åŽ‹ç¼©åŽ: 0, è€—æ—¶: 0ms
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜åŠ è½½å®Œæˆ - è€—æ—¶: 0ms
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ¤” æ‰§è¡Œæ€è€ƒé˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:17:52.033 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - ðŸ§  æ€è€ƒæ‰§è¡Œå™¨å¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:17:52.034 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - ðŸŽ¯ æ€è€ƒç­–ç•¥: é€šç”¨æ€è€ƒ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:17:52.035 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ§  å¼€å§‹æž„å»ºæ·±åº¦æ€è€ƒæ¶ˆæ¯ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:17:52.035 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ¤– å¼€å§‹è°ƒç”¨æ€è€ƒæ¨¡åž‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ¨¡åž‹: qwen-max
15:17:52.036 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æ€è€ƒæ¨¡åž‹è°ƒç”¨å‚æ•° - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ¨¡åž‹: qwen-max
15:17:52.036 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ¨¡åž‹: qwen-max, æ¶ˆæ¯æ•°: 2
15:17:52.512 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸŒ æ€è€ƒæ¨¡åž‹HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, å“åº”æ—¶é—´: 476ms, çŠ¶æ€ç : 200
15:17:52.512 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âš¡ æ€è€ƒæ¨¡åž‹é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, é¦–å—å»¶è¿Ÿ: 476ms
15:18:22.671 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ æ€è€ƒæ¨¡åž‹æµå¼å“åº”ç»“æŸ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»å—æ•°: 109
15:18:22.671 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æ€è€ƒæ¨¡åž‹æµå¼å“åº”å¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»è€—æ—¶: 30635ms, æ€»å—æ•°: 109, é¦–å—å»¶è¿Ÿ: 476ms, æ€è€ƒå†…å®¹é•¿åº¦: 886å­—ç¬¦
15:18:22.672 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ¤– æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è€—æ—¶: 30636ms
15:18:22.672 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æ€è€ƒæ­¥éª¤æµå¼è¾“å‡ºå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»è€—æ—¶: 30637ms
15:18:22.672 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - âœ… æ€è€ƒæ‰§è¡Œå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, ç­–ç•¥: é€šç”¨æ€è€ƒ, è€—æ—¶: 30639ms
15:18:22.672 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… æ€è€ƒé˜¶æ®µå®Œæˆ - è€—æ—¶: 30639ms
15:18:22.672 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“ æ‰§è¡Œå“åº”ç”Ÿæˆé˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:22.672 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ“ å“åº”ç”Ÿæˆå¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ
15:18:22.672 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸŽ¯ ç”Ÿæˆç­–ç•¥: åŸºäºŽæ€è€ƒç”Ÿæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:22.672 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ¤” æ‰§è¡ŒåŸºäºŽæ€è€ƒçš„ç”Ÿæˆ
15:18:22.673 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æµå¼è°ƒç”¨å‚æ•° - ä¼šè¯: unknown
15:18:22.674 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼AIæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: unknown, æ¨¡åž‹: qwen-turbo, æ¶ˆæ¯æ•°: 3
15:18:22.885 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸŒ HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: unknown, å“åº”æ—¶é—´: 211ms, çŠ¶æ€ç : 200
15:18:22.885 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âš¡ é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: unknown, é¦–å—å»¶è¿Ÿ: 211ms
15:18:24.295 [pool-2-thread-3] WARN  c.can.aiassistant.service.AiService - Could not find sessionId for message history
15:18:24.397 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ æµå¼å“åº”ç»“æŸæ ‡è®° - ä¼šè¯: unknown, æ€»å—æ•°: 15
15:18:24.398 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æµå¼å“åº”å¤„ç†å®Œæˆ - ä¼šè¯: unknown, æ€»è€—æ—¶: 1725ms, æ€»å—æ•°: 15, é¦–å—å»¶è¿Ÿ: 211ms, æ¶ˆæ¯é•¿åº¦: 59å­—ç¬¦
15:18:24.398 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - âœ… å“åº”ç”Ÿæˆå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, ç­–ç•¥: åŸºäºŽæ€è€ƒç”Ÿæˆ, å“åº”é•¿åº¦: 59, è€—æ—¶: 1726ms
15:18:24.398 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å“åº”ç”Ÿæˆå®Œæˆ - è€—æ—¶: 1726ms
15:18:24.398 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ’¾ æ‰§è¡Œå†…å­˜ä¿å­˜é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:24.398 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - ðŸ’¾ ä¿å­˜ä¸Šä¸‹æ–‡ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:24.398 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡ä¿å­˜å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è€—æ—¶: 0ms
15:18:24.398 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜ä¿å­˜å®Œæˆ - è€—æ—¶: 0ms
15:18:24.399 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ”„ æ‰§è¡ŒåŽå¤„ç†é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:24.399 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ”„ åŽå¤„ç†å¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:24.401 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === è¯¦ç»†åˆ†æžæŠ¥å‘Š - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a ===
15:18:24.401 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸŽ¯ å¤„ç†è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ
15:18:24.401 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“Š è´¨é‡è¯„ä¼°: æ€»åˆ†={:.2f}, å®Œæ•´æ€§={:.2f}, ç›¸å…³æ€§={:.2f}, æ¸…æ™°åº¦={:.2f}, æ•ˆçŽ‡={:.2f}
15:18:24.401 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - â±ï¸ æ€§èƒ½ç»Ÿè®¡: é¢„å¤„ç†=1ms, æ€»å¤„ç†=0ms
15:18:24.401 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ’° èµ„æºæ¶ˆè€—: Tokens=0, æˆæœ¬=0
15:18:24.401 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === åˆ†æžæŠ¥å‘Šç»“æŸ ===
15:18:24.402 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - âœ… åŽå¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è´¨é‡è¯„åˆ†: {:.2f}, è€—æ—¶: 0.97ms
15:18:24.402 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… åŽå¤„ç†å®Œæˆ - è€—æ—¶: 3ms
15:18:24.402 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸŽ‰ æ™ºèƒ½ä½“æ‰§è¡Œå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»è€—æ—¶: 32370ms
15:18:24.402 [http-nio-8081-exec-8] INFO  c.c.a.controller.StreamController - âœ… æµå¼èŠå¤©å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»å¤„ç†æ—¶é•¿: 32371ms
15:18:24.402 [http-nio-8081-exec-8] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚ç»“æŸ ===
15:18:38.721 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚å¼€å§‹ ===
15:18:38.721 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - ä¼šè¯ID: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:38.721 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - ç”¨æˆ·æ¶ˆæ¯: ç»™æˆ‘ç”Ÿæˆä¸€ä¸ªå¹½é»˜æ•…äº‹
15:18:38.721 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - æ·±åº¦æ€è€ƒ: true
15:18:38.721 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - è¶…æ—¶é…ç½®: 300000ms
15:18:38.721 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ¤– æ™ºèƒ½ä½“æ‰§è¡Œå¼€å§‹
15:18:38.721 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“‹ æ‰§è¡Œé¢„å¤„ç†é˜¶æ®µ
15:18:38.721 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - ðŸ”„ å¼€å§‹é¢„å¤„ç†è¯·æ±‚
15:18:38.721 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - âœ… è¯·æ±‚é¢„å¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ, è€—æ—¶: 0ms
15:18:38.721 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… é¢„å¤„ç†å®Œæˆ - è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ, è€—æ—¶: 0ms
15:18:38.721 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ§  æ‰§è¡Œå†…å­˜åŠ è½½é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:38.722 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - ðŸ§  åŠ è½½ä¸Šä¸‹æ–‡ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:38.725 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡åŠ è½½å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, åŽ†å²è®°å½•: 2, åŽ‹ç¼©åŽ: 2, è€—æ—¶: 3ms
15:18:38.725 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜åŠ è½½å®Œæˆ - è€—æ—¶: 4ms
15:18:38.726 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ¤” æ‰§è¡Œæ€è€ƒé˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:38.726 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - ðŸ§  æ€è€ƒæ‰§è¡Œå™¨å¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:38.726 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - ðŸŽ¯ æ€è€ƒç­–ç•¥: é€šç”¨æ€è€ƒ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:38.726 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ§  å¼€å§‹æž„å»ºæ·±åº¦æ€è€ƒæ¶ˆæ¯ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:18:38.727 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ¤– å¼€å§‹è°ƒç”¨æ€è€ƒæ¨¡åž‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ¨¡åž‹: qwen-max
15:18:38.727 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æ€è€ƒæ¨¡åž‹è°ƒç”¨å‚æ•° - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ¨¡åž‹: qwen-max
15:18:38.727 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ¨¡åž‹: qwen-max, æ¶ˆæ¯æ•°: 2
15:18:39.230 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸŒ æ€è€ƒæ¨¡åž‹HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, å“åº”æ—¶é—´: 503ms, çŠ¶æ€ç : 200
15:18:39.230 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âš¡ æ€è€ƒæ¨¡åž‹é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, é¦–å—å»¶è¿Ÿ: 503ms
15:19:30.253 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ æ€è€ƒæ¨¡åž‹æµå¼å“åº”ç»“æŸ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»å—æ•°: 136
15:19:30.254 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æ€è€ƒæ¨¡åž‹æµå¼å“åº”å¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»è€—æ—¶: 51527ms, æ€»å—æ•°: 136, é¦–å—å»¶è¿Ÿ: 503ms, æ€è€ƒå†…å®¹é•¿åº¦: 1029å­—ç¬¦
15:19:30.254 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ¤– æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è€—æ—¶: 51527ms
15:19:30.255 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æ€è€ƒæ­¥éª¤æµå¼è¾“å‡ºå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»è€—æ—¶: 51529ms
15:19:30.255 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - âœ… æ€è€ƒæ‰§è¡Œå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, ç­–ç•¥: é€šç”¨æ€è€ƒ, è€—æ—¶: 51529ms
15:19:30.255 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… æ€è€ƒé˜¶æ®µå®Œæˆ - è€—æ—¶: 51529ms
15:19:30.255 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“ æ‰§è¡Œå“åº”ç”Ÿæˆé˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:19:30.255 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ“ å“åº”ç”Ÿæˆå¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ
15:19:30.255 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸŽ¯ ç”Ÿæˆç­–ç•¥: åŸºäºŽæ€è€ƒç”Ÿæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:19:30.255 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ¤” æ‰§è¡ŒåŸºäºŽæ€è€ƒçš„ç”Ÿæˆ
15:19:30.256 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æµå¼è°ƒç”¨å‚æ•° - ä¼šè¯: unknown
15:19:30.256 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼AIæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: unknown, æ¨¡åž‹: qwen-turbo, æ¶ˆæ¯æ•°: 3
15:19:30.447 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸŒ HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: unknown, å“åº”æ—¶é—´: 191ms, çŠ¶æ€ç : 200
15:19:30.447 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âš¡ é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: unknown, é¦–å—å»¶è¿Ÿ: 191ms
15:19:37.817 [pool-2-thread-3] WARN  c.can.aiassistant.service.AiService - Could not find sessionId for message history
15:19:37.928 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ æµå¼å“åº”ç»“æŸæ ‡è®° - ä¼šè¯: unknown, æ€»å—æ•°: 70
15:19:37.928 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æµå¼å“åº”å¤„ç†å®Œæˆ - ä¼šè¯: unknown, æ€»è€—æ—¶: 7672ms, æ€»å—æ•°: 70, é¦–å—å»¶è¿Ÿ: 191ms, æ¶ˆæ¯é•¿åº¦: 408å­—ç¬¦
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - âœ… å“åº”ç”Ÿæˆå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, ç­–ç•¥: åŸºäºŽæ€è€ƒç”Ÿæˆ, å“åº”é•¿åº¦: 408, è€—æ—¶: 7674ms
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å“åº”ç”Ÿæˆå®Œæˆ - è€—æ—¶: 7674ms
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ’¾ æ‰§è¡Œå†…å­˜ä¿å­˜é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - ðŸ’¾ ä¿å­˜ä¸Šä¸‹æ–‡ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡ä¿å­˜å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è€—æ—¶: 0ms
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜ä¿å­˜å®Œæˆ - è€—æ—¶: 0ms
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ”„ æ‰§è¡ŒåŽå¤„ç†é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:19:37.929 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ”„ åŽå¤„ç†å¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:19:37.936 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === è¯¦ç»†åˆ†æžæŠ¥å‘Š - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a ===
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸŽ¯ å¤„ç†è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“Š è´¨é‡è¯„ä¼°: æ€»åˆ†={:.2f}, å®Œæ•´æ€§={:.2f}, ç›¸å…³æ€§={:.2f}, æ¸…æ™°åº¦={:.2f}, æ•ˆçŽ‡={:.2f}
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - â±ï¸ æ€§èƒ½ç»Ÿè®¡: é¢„å¤„ç†=0ms, æ€»å¤„ç†=3ms
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ’° èµ„æºæ¶ˆè€—: Tokens=0, æˆæœ¬=0
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === åˆ†æžæŠ¥å‘Šç»“æŸ ===
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - âœ… åŽå¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è´¨é‡è¯„åˆ†: {:.2f}, è€—æ—¶: 1.0ms
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… åŽå¤„ç†å®Œæˆ - è€—æ—¶: 8ms
15:19:37.937 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸŽ‰ æ™ºèƒ½ä½“æ‰§è¡Œå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»è€—æ—¶: 59216ms
15:19:37.938 [http-nio-8081-exec-1] INFO  c.c.a.controller.StreamController - âœ… æµå¼èŠå¤©å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»å¤„ç†æ—¶é•¿: 59218ms
15:19:37.938 [http-nio-8081-exec-1] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚ç»“æŸ ===
15:19:44.253 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚å¼€å§‹ ===
15:19:44.253 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - ä¼šè¯ID: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:44.253 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - ç”¨æˆ·æ¶ˆæ¯: ç»™æˆ‘ç”Ÿäº§ä¸€ä¸ªç¬‘è¯
15:19:44.253 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - æ·±åº¦æ€è€ƒ: false
15:19:44.253 [http-nio-8081-exec-2] INFO  c.c.a.controller.StreamController - è¶…æ—¶é…ç½®: 300000ms
15:19:44.253 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ¤– æ™ºèƒ½ä½“æ‰§è¡Œå¼€å§‹
15:19:44.253 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“‹ æ‰§è¡Œé¢„å¤„ç†é˜¶æ®µ
15:19:44.253 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - ðŸ”„ å¼€å§‹é¢„å¤„ç†è¯·æ±‚
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - âœ… è¯·æ±‚é¢„å¤„ç†å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, è·¯ç”±: æ ‡å‡†å¯¹è¯, è€—æ—¶: 1ms
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… é¢„å¤„ç†å®Œæˆ - è·¯ç”±: æ ‡å‡†å¯¹è¯, è€—æ—¶: 1ms
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ§  æ‰§è¡Œå†…å­˜åŠ è½½é˜¶æ®µ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - ðŸ§  åŠ è½½ä¸Šä¸‹æ–‡ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡åŠ è½½å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, åŽ†å²è®°å½•: 0, åŽ‹ç¼©åŽ: 0, è€—æ—¶: 0ms
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜åŠ è½½å®Œæˆ - è€—æ—¶: 0ms
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“ æ‰§è¡Œå“åº”ç”Ÿæˆé˜¶æ®µ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ“ å“åº”ç”Ÿæˆå¼€å§‹ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, è·¯ç”±: æ ‡å‡†å¯¹è¯
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸŽ¯ ç”Ÿæˆç­–ç•¥: ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:44.254 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ§  æ‰§è¡Œä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ
15:19:44.255 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æµå¼è°ƒç”¨å‚æ•° - ä¼šè¯: unknown
15:19:44.255 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼AIæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: unknown, æ¨¡åž‹: qwen-turbo, æ¶ˆæ¯æ•°: 2
15:19:44.479 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸŒ HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: unknown, å“åº”æ—¶é—´: 224ms, çŠ¶æ€ç : 200
15:19:44.479 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âš¡ é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: unknown, é¦–å—å»¶è¿Ÿ: 224ms
15:19:47.305 [pool-2-thread-3] WARN  c.can.aiassistant.service.AiService - Could not find sessionId for message history
15:19:47.408 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ æµå¼å“åº”ç»“æŸæ ‡è®° - ä¼šè¯: unknown, æ€»å—æ•°: 28
15:19:47.408 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æµå¼å“åº”å¤„ç†å®Œæˆ - ä¼šè¯: unknown, æ€»è€—æ—¶: 3154ms, æ€»å—æ•°: 28, é¦–å—å»¶è¿Ÿ: 224ms, æ¶ˆæ¯é•¿åº¦: 137å­—ç¬¦
15:19:47.408 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - âœ… å“åº”ç”Ÿæˆå®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, ç­–ç•¥: ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ, å“åº”é•¿åº¦: 137, è€—æ—¶: 3154ms
15:19:47.408 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å“åº”ç”Ÿæˆå®Œæˆ - è€—æ—¶: 3154ms
15:19:47.408 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ’¾ æ‰§è¡Œå†…å­˜ä¿å­˜é˜¶æ®µ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:47.408 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - ðŸ’¾ ä¿å­˜ä¸Šä¸‹æ–‡ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:47.409 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡ä¿å­˜å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, è€—æ—¶: 1ms
15:19:47.409 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜ä¿å­˜å®Œæˆ - è€—æ—¶: 1ms
15:19:47.409 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ”„ æ‰§è¡ŒåŽå¤„ç†é˜¶æ®µ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:47.409 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ”„ åŽå¤„ç†å¼€å§‹ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === è¯¦ç»†åˆ†æžæŠ¥å‘Š - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1 ===
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸŽ¯ å¤„ç†è·¯ç”±: æ ‡å‡†å¯¹è¯
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“Š è´¨é‡è¯„ä¼°: æ€»åˆ†={:.2f}, å®Œæ•´æ€§={:.2f}, ç›¸å…³æ€§={:.2f}, æ¸…æ™°åº¦={:.2f}, æ•ˆçŽ‡={:.2f}
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - â±ï¸ æ€§èƒ½ç»Ÿè®¡: é¢„å¤„ç†=1ms, æ€»å¤„ç†=0ms
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ’° èµ„æºæ¶ˆè€—: Tokens=0, æˆæœ¬=0
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === åˆ†æžæŠ¥å‘Šç»“æŸ ===
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.PostProcessor - âœ… åŽå¤„ç†å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, è´¨é‡è¯„åˆ†: {:.2f}, è€—æ—¶: 0.97ms
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… åŽå¤„ç†å®Œæˆ - è€—æ—¶: 1ms
15:19:47.410 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸŽ‰ æ™ºèƒ½ä½“æ‰§è¡Œå®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, æ€»è€—æ—¶: 3157ms
15:19:47.411 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - âœ… æµå¼èŠå¤©å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, æ€»å¤„ç†æ—¶é•¿: 3158ms
15:19:47.411 [http-nio-8081-exec-3] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚ç»“æŸ ===
15:19:52.898 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚å¼€å§‹ ===
15:19:52.898 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - ä¼šè¯ID: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:52.898 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - ç”¨æˆ·æ¶ˆæ¯: rweqr
15:19:52.898 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - æ·±åº¦æ€è€ƒ: true
15:19:52.898 [http-nio-8081-exec-4] INFO  c.c.a.controller.StreamController - è¶…æ—¶é…ç½®: 300000ms
15:19:52.898 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ¤– æ™ºèƒ½ä½“æ‰§è¡Œå¼€å§‹
15:19:52.898 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“‹ æ‰§è¡Œé¢„å¤„ç†é˜¶æ®µ
15:19:52.898 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - ðŸ”„ å¼€å§‹é¢„å¤„ç†è¯·æ±‚
15:19:52.898 [pool-2-thread-3] INFO  c.c.a.service.RequestPreprocessor - âœ… è¯·æ±‚é¢„å¤„ç†å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ, è€—æ—¶: 0ms
15:19:52.898 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… é¢„å¤„ç†å®Œæˆ - è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ, è€—æ—¶: 0ms
15:19:52.898 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ§  æ‰§è¡Œå†…å­˜åŠ è½½é˜¶æ®µ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:52.898 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - ðŸ§  åŠ è½½ä¸Šä¸‹æ–‡ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:52.899 [pool-2-thread-3] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡åŠ è½½å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, åŽ†å²è®°å½•: 2, åŽ‹ç¼©åŽ: 2, è€—æ—¶: 1ms
15:19:52.899 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜åŠ è½½å®Œæˆ - è€—æ—¶: 1ms
15:19:52.899 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ¤” æ‰§è¡Œæ€è€ƒé˜¶æ®µ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:52.899 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - ðŸ§  æ€è€ƒæ‰§è¡Œå™¨å¼€å§‹ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:52.899 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - ðŸŽ¯ æ€è€ƒç­–ç•¥: é€šç”¨æ€è€ƒ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:52.900 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ§  å¼€å§‹æž„å»ºæ·±åº¦æ€è€ƒæ¶ˆæ¯ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:19:52.900 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ¤– å¼€å§‹è°ƒç”¨æ€è€ƒæ¨¡åž‹ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, æ¨¡åž‹: qwen-max
15:19:52.900 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æ€è€ƒæ¨¡åž‹è°ƒç”¨å‚æ•° - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, æ¨¡åž‹: qwen-max
15:19:52.900 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, æ¨¡åž‹: qwen-max, æ¶ˆæ¯æ•°: 2
15:19:53.381 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸŒ æ€è€ƒæ¨¡åž‹HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, å“åº”æ—¶é—´: 481ms, çŠ¶æ€ç : 200
15:19:53.382 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âš¡ æ€è€ƒæ¨¡åž‹é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, é¦–å—å»¶è¿Ÿ: 482ms
15:20:07.377 [pool-2-thread-3] ERROR c.c.a.controller.StreamController - Error sending stream response: java.io.IOException: Broken pipe
15:20:07.377 [http-nio-8081-exec-5] ERROR c.c.a.controller.StreamController - âŒ æµå¼èŠå¤©å‘ç”Ÿé”™è¯¯ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, é”™è¯¯: Broken pipe, å¤„ç†æ—¶é•¿: 14479ms
15:20:07.380 [http-nio-8081-exec-5] ERROR c.c.a.e.GlobalExceptionHandler - Unexpected exception occurred: Broken pipe
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155)
	at com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200)
	at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483)
	at org.springframework.http.converter.AbstractGenericHttpMessageConverter.writeInternal(AbstractGenericHttpMessageConverter.java:123)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.AiService.lambda$streamCallThinkingModel$0(AiService.java:303)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallThinkingModel(AiService.java:243)
	at com.can.aiassistant.service.AiService.streamThinkingSteps(AiService.java:171)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinkingWithStrategy(ThinkingExecutor.java:191)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinking(ThinkingExecutor.java:72)
	at com.can.aiassistant.service.AgentExecutor.executeThinking(AgentExecutor.java:146)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:63)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:20:07.382 [http-nio-8081-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Failure in @ExceptionHandler com.can.aiassistant.exception.GlobalExceptionHandler#handleGenericException(Exception)
org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class java.util.HashMap] with preset Content-Type 'text/event-stream'
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:319)
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:245)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:432)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:74)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:175)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1357)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1160)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1106)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:642)
	at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:520)
	at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:463)
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:343)
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:222)
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:308)
	at org.apache.catalina.core.AsyncContextImpl.setErrorState(AsyncContextImpl.java:430)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:155)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:20:07.384 [http-nio-8081-exec-5] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] threw exception
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155)
	at com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200)
	at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483)
	at org.springframework.http.converter.AbstractGenericHttpMessageConverter.writeInternal(AbstractGenericHttpMessageConverter.java:123)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.AiService.lambda$streamCallThinkingModel$0(AiService.java:303)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallThinkingModel(AiService.java:243)
	at com.can.aiassistant.service.AiService.streamThinkingSteps(AiService.java:171)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinkingWithStrategy(ThinkingExecutor.java:191)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinking(ThinkingExecutor.java:72)
	at com.can.aiassistant.service.AgentExecutor.executeThinking(AgentExecutor.java:146)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:63)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:20:07.384 [http-nio-8081-exec-5] ERROR o.a.c.c.C.[Tomcat].[localhost] - Exception Processing [ErrorPage[errorCode=0, location=/error]]
java.io.IOException: Broken pipe
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:62)
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:137)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:102)
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:58)
	at java.base/sun.nio.ch.SocketChannelImpl.implWrite(SocketChannelImpl.java:566)
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:618)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:118)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1381)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:728)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:712)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1245)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:400)
	at org.apache.coyote.Response.action(Response.java:208)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:301)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:267)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:120)
	at java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:155)
	at com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1200)
	at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1063)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:483)
	at org.springframework.http.converter.AbstractGenericHttpMessageConverter.writeInternal(AbstractGenericHttpMessageConverter.java:123)
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:236)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.sendInternal(ResponseBodyEmitterReturnValueHandler.java:221)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler$HttpMessageConvertingHandler.send(ResponseBodyEmitterReturnValueHandler.java:212)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.sendInternal(ResponseBodyEmitter.java:234)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:225)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$3(StreamController.java:86)
	at com.can.aiassistant.service.AiService.lambda$streamCallThinkingModel$0(AiService.java:303)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:247)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:188)
	at org.apache.hc.client5.http.impl.classic.CloseableHttpClient.execute(CloseableHttpClient.java:162)
	at com.can.aiassistant.service.AiService.streamCallThinkingModel(AiService.java:243)
	at com.can.aiassistant.service.AiService.streamThinkingSteps(AiService.java:171)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinkingWithStrategy(ThinkingExecutor.java:191)
	at com.can.aiassistant.service.ThinkingExecutor.executeThinking(ThinkingExecutor.java:72)
	at com.can.aiassistant.service.AgentExecutor.executeThinking(AgentExecutor.java:146)
	at com.can.aiassistant.service.AgentExecutor.execute(AgentExecutor.java:63)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:84)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:20:07.385 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - âœ… æµå¼èŠå¤©å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, æ€»å¤„ç†æ—¶é•¿: 14487ms
15:20:07.385 [http-nio-8081-exec-5] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚ç»“æŸ ===
15:20:23.299 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - ðŸ¤– æµå¼æ€è€ƒæ¨¡åž‹è°ƒç”¨å®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, è€—æ—¶: 30398ms
15:20:23.304 [pool-2-thread-3] INFO  c.can.aiassistant.service.AiService - âœ… æ€è€ƒæ­¥éª¤æµå¼è¾“å‡ºå®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, æ€»è€—æ—¶: 30404ms
15:20:23.304 [pool-2-thread-3] INFO  c.c.a.service.ThinkingExecutor - âœ… æ€è€ƒæ‰§è¡Œå®Œæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, ç­–ç•¥: é€šç”¨æ€è€ƒ, è€—æ—¶: 30405ms
15:20:23.304 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - âœ… æ€è€ƒé˜¶æ®µå®Œæˆ - è€—æ—¶: 30405ms
15:20:23.304 [pool-2-thread-3] INFO  c.c.a.service.AgentExecutor - ðŸ“ æ‰§è¡Œå“åº”ç”Ÿæˆé˜¶æ®µ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:20:23.304 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ“ å“åº”ç”Ÿæˆå¼€å§‹ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, è·¯ç”±: ç®€å•æ·±åº¦æ€è€ƒ
15:20:23.304 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸŽ¯ ç”Ÿæˆç­–ç•¥: åŸºäºŽæ€è€ƒç”Ÿæˆ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1
15:20:23.304 [pool-2-thread-3] INFO  c.c.a.service.ResponseGenerator - ðŸ¤” æ‰§è¡ŒåŸºäºŽæ€è€ƒçš„ç”Ÿæˆ
15:20:23.304 [pool-2-thread-3] ERROR c.c.a.service.ResponseGenerator - âŒ å“åº”ç”Ÿæˆå¤±è´¥ - ä¼šè¯: 2f6d2a3e-891a-4aeb-ac25-75136a9c37b1, é”™è¯¯: ResponseBodyEmitter has already completed, è€—æ—¶: 0ms
15:20:23.304 [pool-2-thread-3] ERROR c.c.a.service.AgentExecutor - âŒ æ™ºèƒ½ä½“æ‰§è¡Œå¤±è´¥ - é”™è¯¯: ResponseBodyEmitter has already completed, è€—æ—¶: 30406ms
15:20:23.304 [pool-2-thread-3] ERROR c.c.a.controller.StreamController - Stream chat error: ResponseBodyEmitter has already completed
Exception in thread "pool-2-thread-3" java.lang.IllegalStateException: ResponseBodyEmitter has already completed
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter.send(ResponseBodyEmitter.java:223)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:135)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.SseEmitter.send(SseEmitter.java:99)
	at com.can.aiassistant.controller.StreamController.lambda$streamChat$4(StreamController.java:99)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
15:21:12.127 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚å¼€å§‹ ===
15:21:12.129 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - ä¼šè¯ID: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:12.129 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - ç”¨æˆ·æ¶ˆæ¯: ç»™æˆ‘ç”Ÿæˆä¸€ä¸ªå¹½é»˜æ•…äº‹
15:21:12.129 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - æ·±åº¦æ€è€ƒ: false
15:21:12.129 [http-nio-8081-exec-7] INFO  c.c.a.controller.StreamController - è¶…æ—¶é…ç½®: 300000ms
15:21:12.129 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - ðŸ¤– æ™ºèƒ½ä½“æ‰§è¡Œå¼€å§‹
15:21:12.129 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - ðŸ“‹ æ‰§è¡Œé¢„å¤„ç†é˜¶æ®µ
15:21:12.129 [pool-2-thread-4] INFO  c.c.a.service.RequestPreprocessor - ðŸ”„ å¼€å§‹é¢„å¤„ç†è¯·æ±‚
15:21:12.129 [pool-2-thread-4] INFO  c.c.a.service.RequestPreprocessor - âœ… è¯·æ±‚é¢„å¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è·¯ç”±: æ ‡å‡†å¯¹è¯, è€—æ—¶: 0ms
15:21:12.129 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - âœ… é¢„å¤„ç†å®Œæˆ - è·¯ç”±: æ ‡å‡†å¯¹è¯, è€—æ—¶: 0ms
15:21:12.129 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - ðŸ§  æ‰§è¡Œå†…å­˜åŠ è½½é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:12.129 [pool-2-thread-4] INFO  c.c.a.service.MemoryManager - ðŸ§  åŠ è½½ä¸Šä¸‹æ–‡ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:12.130 [pool-2-thread-4] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡åŠ è½½å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, åŽ†å²è®°å½•: 4, åŽ‹ç¼©åŽ: 4, è€—æ—¶: 1ms
15:21:12.130 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜åŠ è½½å®Œæˆ - è€—æ—¶: 1ms
15:21:12.130 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - ðŸ“ æ‰§è¡Œå“åº”ç”Ÿæˆé˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:12.130 [pool-2-thread-4] INFO  c.c.a.service.ResponseGenerator - ðŸ“ å“åº”ç”Ÿæˆå¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è·¯ç”±: æ ‡å‡†å¯¹è¯
15:21:12.130 [pool-2-thread-4] INFO  c.c.a.service.ResponseGenerator - ðŸŽ¯ ç”Ÿæˆç­–ç•¥: ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:12.130 [pool-2-thread-4] INFO  c.c.a.service.ResponseGenerator - ðŸ§  æ‰§è¡Œä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ
15:21:12.130 [pool-2-thread-4] INFO  c.can.aiassistant.service.AiService - ðŸ” å¼€å§‹éªŒè¯æµå¼è°ƒç”¨å‚æ•° - ä¼šè¯: unknown
15:21:12.130 [pool-2-thread-4] INFO  c.can.aiassistant.service.AiService - ðŸ“¡ å¼€å§‹æµå¼AIæ¨¡åž‹è°ƒç”¨ - ä¼šè¯: unknown, æ¨¡åž‹: qwen-turbo, æ¶ˆæ¯æ•°: 6
15:21:12.544 [pool-2-thread-4] INFO  c.can.aiassistant.service.AiService - ðŸŒ HTTPå“åº”å·²æŽ¥æ”¶ - ä¼šè¯: unknown, å“åº”æ—¶é—´: 413ms, çŠ¶æ€ç : 200
15:21:12.544 [pool-2-thread-4] INFO  c.can.aiassistant.service.AiService - âš¡ é¦–ä¸ªæ•°æ®å—å·²æŽ¥æ”¶ - ä¼šè¯: unknown, é¦–å—å»¶è¿Ÿ: 413ms
15:21:20.868 [pool-2-thread-4] WARN  c.can.aiassistant.service.AiService - Could not find sessionId for message history
15:21:20.977 [pool-2-thread-4] INFO  c.can.aiassistant.service.AiService - ðŸ æµå¼å“åº”ç»“æŸæ ‡è®° - ä¼šè¯: unknown, æ€»å—æ•°: 79
15:21:20.977 [pool-2-thread-4] INFO  c.can.aiassistant.service.AiService - âœ… æµå¼å“åº”å¤„ç†å®Œæˆ - ä¼šè¯: unknown, æ€»è€—æ—¶: 8847ms, æ€»å—æ•°: 79, é¦–å—å»¶è¿Ÿ: 413ms, æ¶ˆæ¯é•¿åº¦: 455å­—ç¬¦
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.ResponseGenerator - âœ… å“åº”ç”Ÿæˆå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, ç­–ç•¥: ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ, å“åº”é•¿åº¦: 455, è€—æ—¶: 8848ms
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - âœ… å“åº”ç”Ÿæˆå®Œæˆ - è€—æ—¶: 8848ms
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - ðŸ’¾ æ‰§è¡Œå†…å­˜ä¿å­˜é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.MemoryManager - ðŸ’¾ ä¿å­˜ä¸Šä¸‹æ–‡ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.MemoryManager - âœ… ä¸Šä¸‹æ–‡ä¿å­˜å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è€—æ—¶: 0ms
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - âœ… å†…å­˜ä¿å­˜å®Œæˆ - è€—æ—¶: 0ms
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - ðŸ”„ æ‰§è¡ŒåŽå¤„ç†é˜¶æ®µ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:20.978 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - ðŸ”„ åŽå¤„ç†å¼€å§‹ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a
15:21:20.979 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === è¯¦ç»†åˆ†æžæŠ¥å‘Š - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a ===
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - ðŸŽ¯ å¤„ç†è·¯ç”±: æ ‡å‡†å¯¹è¯
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - ðŸ“Š è´¨é‡è¯„ä¼°: æ€»åˆ†={:.2f}, å®Œæ•´æ€§={:.2f}, ç›¸å…³æ€§={:.2f}, æ¸…æ™°åº¦={:.2f}, æ•ˆçŽ‡={:.2f}
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - â±ï¸ æ€§èƒ½ç»Ÿè®¡: é¢„å¤„ç†=0ms, æ€»å¤„ç†=1ms
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - ðŸ’° èµ„æºæ¶ˆè€—: Tokens=0, æˆæœ¬=0
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - ðŸ“‹ === åˆ†æžæŠ¥å‘Šç»“æŸ ===
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.PostProcessor - âœ… åŽå¤„ç†å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, è´¨é‡è¯„åˆ†: {:.2f}, è€—æ—¶: 1.0ms
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - âœ… åŽå¤„ç†å®Œæˆ - è€—æ—¶: 2ms
15:21:20.980 [pool-2-thread-4] INFO  c.c.a.service.AgentExecutor - ðŸŽ‰ æ™ºèƒ½ä½“æ‰§è¡Œå®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»è€—æ—¶: 8851ms
15:21:20.981 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - âœ… æµå¼èŠå¤©å®Œæˆ - ä¼šè¯: a832c85a-7a29-4c8e-9d01-dd03bc4d436a, æ€»å¤„ç†æ—¶é•¿: 8854ms
15:21:20.981 [http-nio-8081-exec-9] INFO  c.c.a.controller.StreamController - === æµå¼èŠå¤©è¯·æ±‚ç»“æŸ ===
